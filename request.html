<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Contact Support</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link
    rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
  />
  <style>
    /* Custom styles */
    .file-input-label {
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 10px 16px;
      border-radius: 6px;
      border: 1px solid #d1d5db;
      background-color: #f9fafb;
      color: #374151;
      cursor: pointer;
      transition: all 0.2s;
    }
    .file-input-label:hover {
      background-color: #f3f4f6;
    }
    .file-name {
      margin-left: 10px;
      color: #6b7280;
      font-size: 14px;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      max-width: 200px;
    }
    .success-message,
    .error-message {
      transition: all 0.3s ease;
    }
    .spinner {
      animation: spin 1s linear infinite;
    }
    @keyframes spin {
      0% {
        transform: rotate(0deg);
      }
      100% {
        transform: rotate(360deg);
      }
    }
  </style>
</head>
<body class="bg-gray-50 min-h-screen flex items-center justify-center p-4">
  <div
    class="w-full max-w-2xl bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden"
  >
    <div class="p-8 sm:p-10">
      <div class="mb-6">
        <h1 class="text-2xl sm:text-3xl font-bold text-gray-900 mb-1">
          Submit a request
        </h1>
        <p class="text-gray-500 text-sm sm:text-base">
          We're here to help. Please fill out the form below and we'll get back
          to you as soon as possible.
        </p>
      </div>

      <!-- FORM MODIFICATO PER INVIO A FORMSPREE -->
      <form
        id="supportForm"
        class="space-y-5"
        action="https://formspree.io/f/xrbkgqlb"
        method="POST"
        enctype="multipart/form-data"
      >
        <!-- Success/Error Message Container -->
        <div id="formMessage" class="hidden text-center p-3 rounded"></div>

        <!-- Email Field -->
        <div>
          <label
            for="email"
            class="block text-sm font-medium text-gray-700 mb-1"
            >Email address</label
          >
          <input
            type="email"
            id="email"
            name="email"
            placeholder="your@email.com"
            required
            class="w-full border border-gray-300 rounded-md px-3 py-2.5 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition"
          />
        </div>

        <!-- Subject Field -->
        <div>
          <label
            for="subject"
            class="block text-sm font-medium text-gray-700 mb-1"
            >Subject</label
          >
          <input
            type="text"
            id="subject"
            name="subject"
            placeholder="Brief summary of your request"
            required
            minlength="3"
            class="w-full border border-gray-300 rounded-md px-3 py-2.5 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition"
          />
        </div>

        <!-- Description Field -->
        <div>
          <label
            for="description"
            class="block text-sm font-medium text-gray-700 mb-1"
            >Description</label
          >
          <textarea
            id="description"
            name="message"
            rows="6"
            placeholder="Describe your issue in detail"
            required
            minlength="10"
            class="w-full border border-gray-300 rounded-md px-3 py-2.5 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition resize-y"
          ></textarea>
          <p
            id="descriptionError"
            class="mt-1 text-sm text-red-600 hidden"
          >
            Please provide a detailed description (at least 10 characters).
          </p>
        </div>

        <!-- Attachment Field -->
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-1"
            >Attachment (optional)</label
          >
          <div class="flex items-center">
            <label for="attachment" class="file-input-label">
              <i class="fas fa-paperclip mr-2"></i>
              <span>Choose file</span>
              <input
                type="file"
                id="attachment"
                name="attachment"
                class="hidden"
                accept=".jpg,.jpeg,.png,.pdf,.doc,.docx"
              />
            </label>
            <span id="fileName" class="file-name">No file chosen</span>
          </div>
          <p class="mt-1 text-xs text-gray-500">
            Max file size: 5MB (JPEG, PNG, PDF, DOC)
          </p>
          <p id="fileError" class="mt-1 text-sm text-red-600 hidden"></p>
        </div>

        <!-- Submit Button -->
        <div class="pt-2">
          <button
            type="submit"
            id="submitBtn"
            disabled
            class="w-full bg-blue-600 hover:bg-blue-700 text-white font-medium py-3 px-4 rounded-md transition focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-70 disabled:cursor-not-allowed"
          >
            <span id="submitText">Submit request</span>
            <span id="submitSpinner" class="hidden ml-2">
              <i class="fas fa-spinner spinner"></i>
            </span>
          </button>
        </div>
      </form>
    </div>
  </div>

  <script>
    document.addEventListener("DOMContentLoaded", function () {
      const form = document.getElementById("supportForm");
      const submitBtn = document.getElementById("submitBtn");
      const submitText = document.getElementById("submitText");
      const submitSpinner = document.getElementById("submitSpinner");
      const formMessage = document.getElementById("formMessage");

      // Form fields
      const email = document.getElementById("email");
      const subject = document.getElementById("subject");
      const description = document.getElementById("description");
      const attachment = document.getElementById("attachment");

      // Error messages
      const descriptionError = document.getElementById("descriptionError");
      const fileError = document.getElementById("fileError");
      const fileName = document.getElementById("fileName");

      // File input handler
      attachment.addEventListener("change", function () {
        if (this.files.length > 0) {
          const file = this.files[0];

          // Validate file size
          if (file.size > 5 * 1024 * 1024) {
            // 5MB
            fileError.textContent = "File size exceeds 5MB limit.";
            fileError.classList.remove("hidden");
            this.value = ""; // Clear the file input
            fileName.textContent = "No file chosen";
          } else {
            fileError.classList.add("hidden");
            fileName.textContent = file.name;
          }
        } else {
          fileName.textContent = "No file chosen";
        }
        validateForm();
      });

      // Live validation for all fields
      [email, subject, description].forEach((field) => {
        field.addEventListener("input", validateForm);
      });

      // Form validation function
      function validateForm() {
        let isValid = true;

        // Email validation
        if (!email.checkValidity()) {
          isValid = false;
        }

        // Subject validation
        if (subject.value.length < 3) {
          isValid = false;
        }

        // Description validation
        if (description.value.length < 10) {
          descriptionError.classList.remove("hidden");
          isValid = false;
        } else {
          descriptionError.classList.add("hidden");
        }

        // File validation (if a file is selected)
        if (attachment.files.length > 0 && attachment.files[0].size > 5 * 1024 * 1024) {
          isValid = false;
        }

        submitBtn.disabled = !isValid;
        return isValid;
      }

      // Show a message in the formMessage div
      function showMessage(message, type) {
        formMessage.textContent = message;
        formMessage.className = ""; // reset classes
        formMessage.classList.remove("hidden");
        if
